<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Космическая система управления</title>
  <style>
    body {
      margin: 0;
      background: #000;
      color: #0f0;
      font-family: Arial, sans-serif;
      overflow: hidden;
    }
    #space {
      width: 100vw;
      height: 100vh;
      display: block;
    }
    .control-panel {
      position: absolute;
      top: 20px;
      right: 20px;
      background: rgba(0, 30, 0, 0.9);
      padding: 15px;
      border: 1px solid #00cc00;
      border-radius: 8px;
      max-width: 300px;
    }
    .control-panel h3 {
      margin: 0 0 15px 0;
      text-align: center;
      color: #00ff00;
    }
    .form-group {
      margin-bottom: 12px;
    }
    label {
      display: block;
      margin-bottom: 5px;
      font-size: 12px;
      color: #0f0;
    }
    input, select, button {
      width: 100%;
      padding: 8px;
      background: #002200;
      border: 1px solid #00cc00;
      color: #0f0;
      border-radius: 4px;
      box-sizing: border-box;
    }
    button {
      cursor: pointer;
      margin-top: 10px;
      padding: 10px;
      transition: all 0.3s;
      background: #004400;
    }
    button:hover {
      background: #006600;
    }
    .stats {
      margin-top: 15px;
      font-size: 12px;
      border-top: 1px solid #00cc00;
      padding-top: 10px;
      color: #0f0;
    }
    .stats div {
      margin: 5px 0;
    }
    .object-list {
      max-height: 150px;
      overflow-y: auto;
      border: 1px solid #00cc00;
      padding: 8px;
      margin-top: 10px;
      background: rgba(0, 20, 0, 0.8);
      border-radius: 4px;
    }
    .object-item {
      padding: 4px 0;
      border-bottom: 1px solid #003300;
      font-size: 11px;
    }
    .object-item:last-child {
      border-bottom: none;
    }
  </style>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/jsm/loaders/FontLoader.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/jsm/geometries/TextGeometry.js"></script>
</head>
<body>
  <canvas id="space"></canvas>
  <div class="control-panel">

    <div class="form-group">
      <label>Имя объекта:</label>
      <input type="text" id="objectName" placeholder="Введите имя" maxlength="10">
    </div>
    <div class="form-group">
      <label>Тип объекта:</label>
      <select id="objectType">
        <option value="star">Звезда</option>
        <option value="planet">Планета</option>
        <option value="satellite">Спутник</option>
        <option value="station">Станция</option>
      </select>
    </div>
    <div class="form-group">
      <label>Размер объекта:</label>
      <input type="number" id="objectSize" min="1" max="50" value="10">
    </div>
    <div class="form-group">
      <label>Скорость вращения:</label>
      <input type="number" id="objectSpeed" min="0.001" max="0.1" step="0.001" value="0.01">
    </div>
    <button onclick="addSpaceObject()">ДОБАВИТЬ ОБЪЕКТ</button>
    <button onclick="clearAllObjects()" style="background: #330000;">ОЧИСТИТЬ ВСЁ</button>
    <div class="stats" id="stats">
      <div>Объектов в системе: <span id="totalObjects">0</span></div>
      <div>Общая масса: <span id="totalMass">0</span></div>
      <div>Средний размер: <span id="avgSize">0</span></div>
      <div>Макс. скорость: <span id="maxSpeed">0</span></div>
    </div>
    <div class="object-list" id="objectList"></div>
  </div>
  <script>
    let scene, camera, renderer, stars, textMesh, numberMesh;
    let font;
    let spaceObjects = [];
    const systemInfo = {
      name: new String("Галактическая Система v1.0"),
      version: new Number(1.0),
      mathConstants: {
        PI: Math.PI,
        E: Math.E
      }
    };

    function init() {
      scene = new THREE.Scene();
      camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 2000);
      camera.position.z = 400;
      renderer = new THREE.WebGLRenderer({ canvas: document.getElementById('space'), antialias: true });
      renderer.setSize(window.innerWidth, window.innerHeight);
      renderer.setPixelRatio(window.devicePixelRatio);
      renderer.setClearColor(0x000000, 1);
      const fontLoader = new THREE.FontLoader();
      fontLoader.load('https://cdn.jsdelivr.net/npm/three@0.128.0/examples/fonts/helvetiker_regular.typeface.json', function(loadedFont) {
        font = loadedFont;
        createText();
        createNumber();
        updateSystemInfo();
      });
      createStars();
      animate();
      window.addEventListener('resize', onResize);
    }

    function createStars() {
      const starGeometry = new THREE.BufferGeometry();
      const starCount = 2000;
      const positions = [];
      for (let i = 0; i < starCount; i++) {
        const x = THREE.MathUtils.randFloatSpread(1000);
        const y = THREE.MathUtils.randFloatSpread(1000);
        const z = THREE.MathUtils.randFloatSpread(1000);
        positions.push(x, y, z);
      }
      starGeometry.setAttribute('position', new THREE.Float32BufferAttribute(positions, 3));
      const starMaterial = new THREE.PointsMaterial({
        color: 0x00ff00,
        size: 2,
        transparent: true,
        opacity: 0.6
      });
      stars = new THREE.Points(starGeometry, starMaterial);
      scene.add(stars);
    }

    function createText() {
      const textGeometry = new THREE.TextGeometry('LohDeAlen', {
        font: font,
        size: 20,
        height: 5,
        curveSegments: 12,
        bevelEnabled: true,
        bevelThickness: 1,
        bevelSize: 1,
        bevelOffset: 0,
        bevelSegments: 5
      });
      textGeometry.computeBoundingBox();
      const textWidth = textGeometry.boundingBox.max.x - textGeometry.boundingBox.min.x;
      textGeometry.translate(-textWidth / 2, 0, 0);
      const textMaterial = new THREE.MeshBasicMaterial({
        color: 0x00ff00,
        transparent: true,
        opacity: 0.9
      });
      textMesh = new THREE.Mesh(textGeometry, textMaterial);
      textMesh.position.set(0, 50, 0);
      scene.add(textMesh);
    }

    function createNumber() {
      const numberGeometry = new THREE.TextGeometry('42', {
        font: font,
        size: 15,
        height: 4,
        curveSegments: 12,
        bevelEnabled: true,
        bevelThickness: 0.8,
        bevelSize: 0.8,
        bevelOffset: 0,
        bevelSegments: 5
      });
      numberGeometry.computeBoundingBox();
      const numberWidth = numberGeometry.boundingBox.max.x - numberGeometry.boundingBox.min.x;
      numberGeometry.translate(-numberWidth / 2, 0, 0);
      const numberMaterial = new THREE.MeshBasicMaterial({
        color: 0x00ff00,
        transparent: true,
        opacity: 0.9
      });
      numberMesh = new THREE.Mesh(numberGeometry, numberMaterial);
      numberMesh.position.set(0, -50, 0);
      scene.add(numberMesh);
    }

    function addSpaceObject() {
      const name = document.getElementById('objectName').value || `Объект_${spaceObjects.length + 1}`;
      const type = document.getElementById('objectType').value;
      const size = parseFloat(document.getElementById('objectSize').value);
      const speed = parseFloat(document.getElementById('objectSpeed').value);
      if (name.length === 0) {
        alert('Введите имя объекта!');
        return;
      }
      let geometry;
      const colors = {
        star: 0xffff00,
        planet: 0x00ff00,
        satellite: 0x88ff88,
        station: 0xff4444
      };
      switch(type) {
        case 'star':
          geometry = new THREE.SphereGeometry(size, 32, 32);
          break;
        case 'planet':
          geometry = new THREE.SphereGeometry(size, 24, 24);
          break;
        case 'satellite':
          geometry = new THREE.BoxGeometry(size, size, size);
          break;
        case 'station':
          geometry = new THREE.OctahedronGeometry(size);
          break;
      }
      const material = new THREE.MeshBasicMaterial({
        color: colors[type],
        wireframe: true,
        transparent: true,
        opacity: 0.8
      });
      const mesh = new THREE.Mesh(geometry, material);
      const position = {
        x: (Math.random() - 0.5) * 500,
        y: (Math.random() - 0.5) * 500,
        z: (Math.random() - 0.5) * 500
      };
      mesh.position.set(position.x, position.y, position.z);
      const spaceObject = {
        id: Math.floor(Math.random() * 10000),
        name: new String(name),
        type: type,
        size: new Number(size),
        speed: new Number(speed),
        mesh: mesh
      };
      spaceObjects.push(spaceObject);
      scene.add(mesh);
      updateObjectList();
      updateSystemInfo();
      document.getElementById('objectName').value = '';
    }

    function clearAllObjects() {
      spaceObjects.forEach(obj => {
        scene.remove(obj.mesh);
      });
      spaceObjects = [];
      updateObjectList();
      updateSystemInfo();
    }

    function updateObjectList() {
      const list = document.getElementById('objectList');
      list.innerHTML = '';
      spaceObjects.forEach(obj => {
        const div = document.createElement('div');
        div.className = 'object-item';
        div.textContent = `${obj.name.valueOf()} (${obj.type})`;
        list.appendChild(div);
      });
    }

    function updateSystemInfo() {
      document.getElementById('totalObjects').textContent = spaceObjects.length;
      const totalMass = spaceObjects.reduce((sum, obj) => sum + Math.pow(obj.size.valueOf(), 3), 0);
      document.getElementById('totalMass').textContent = Math.round(totalMass);
      const avgSize = spaceObjects.length > 0 ? 
        spaceObjects.reduce((sum, obj) => sum + obj.size.valueOf(), 0) / spaceObjects.length : 0;
      document.getElementById('avgSize').textContent = avgSize.toFixed(1);
      const maxSpeed = spaceObjects.length > 0 ? 
        Math.max(...spaceObjects.map(obj => obj.speed.valueOf())) : 0;
      document.getElementById('maxSpeed').textContent = maxSpeed.toFixed(3);
    }

    function onResize() {
      camera.aspect = window.innerWidth / window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
    }

    let t = 0;
    function animate() {
      requestAnimationFrame(animate);
      stars.rotation.y += 0.0008;
      stars.rotation.x += 0.0004;
      if (textMesh) {
        textMesh.rotation.y += 0.01;
        textMesh.position.x = Math.sin(t * 0.5) * 100;
        textMesh.position.y = 50 + Math.cos(t * 0.7) * 30;
      }
      if (numberMesh) {
        numberMesh.rotation.x += 0.008;
        numberMesh.position.x = Math.cos(t * 0.6) * 120;
        numberMesh.position.y = -50 + Math.sin(t * 0.8) * 40;
      }
      spaceObjects.forEach(obj => {
        obj.mesh.rotation.y += obj.speed.valueOf();
        obj.mesh.rotation.x += obj.speed.valueOf() * 0.5;
        obj.mesh.position.x += Math.sin(t + obj.id * 0.001) * 0.1;
        obj.mesh.position.y += Math.cos(t + obj.id * 0.001) * 0.1;
      });
      t += 0.001;
      camera.position.z = 400 + Math.sin(t) * 50;
      camera.lookAt(0, 0, 0);
      renderer.render(scene, camera);
    }
    window.onload = init;
  </script>
</body>
</html>